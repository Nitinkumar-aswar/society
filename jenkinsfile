pipeline {
    agent any
    
    environment {
        // Define environment variables if needed
        REACT_APP_DIR = 'frontend'
        PYTHON_APP_DIR = 'backend'
        AWS_REGION = 'us-west-1'
    }
    
    stages {
        stage('Checkout Code') {
            steps {
                // Checkout the code from your repository
                git 'https://github.com/Nitinkumar-aswar/society.git'
            }
        }

        stage('Install Dependencies') {
            steps {
                // Install dependencies for React
                dir(society/Frontend/myapp/src/App.js) {
                    sh 'npm install'
                }
                
                // Install dependencies for Python (if using a virtual environment)
                dir(society/Backend/app.py) {
                    sh 'pip install -r requirements.txt'
                }
            }
        }

        stage('Build') {
            steps {
                // Build React App
                dir(society/Frontend/myapp/src/App.js) {
                    sh 'npm run build'
                }
            }
        }

        stage('Test') {
            steps {
                // Run tests for React and Python
                dir(society/Frontend/myapp/src/App.js) {
                    sh 'npm run test'
                }
                dir(society/Backend/app.py) {
                    sh 'pytest'  // Assuming you're using pytest for Python testing
                }
            }
        }
    }
}
